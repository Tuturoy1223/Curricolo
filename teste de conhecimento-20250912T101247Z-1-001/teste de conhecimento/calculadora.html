<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora Simples</title>
  <style>
    :root{
      --bg:#0f1724; --panel:#111827; --accent:#06b6d4; --btn:#1f2937; --btn-hover:#374151; --txt:#e6eef8;
      --pad:12px; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071029 0%, #0b1220 100%);color:var(--txt);padding:24px}

    .calculator{
      width:340px; max-width:95vw; background:linear-gradient(180deg,var(--panel), #0b1220); border-radius:14px; padding:18px; box-shadow:0 8px 30px rgba(2,6,23,.6);
    }

    .display{
      background:rgba(255,255,255,0.03); border-radius:10px; padding:14px; text-align:right; font-size:28px; line-height:1; min-height:64px; color:var(--txt);
      display:flex;flex-direction:column;justify-content:center; word-break:break-all;
    }
    .display .small{font-size:12px;opacity:.6}

    .keys{margin-top:12px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:10px}
    button{
      border:0; padding:14px; border-radius:10px; font-size:18px; cursor:pointer; background:var(--btn); color:var(--txt); box-shadow:inset 0 -4px 0 rgba(0,0,0,.25);
    }
    button:active{transform:translateY(1px)}
    .op{background:linear-gradient(180deg,var(--accent), #0284a7); color:#042022; font-weight:600}
    .wide{grid-column:span 2}
    .gray{background:#0b1220}

    @media (max-width:420px){.display{font-size:24px}}
  </style>
</head>
<body>
  <main class="calculator" role="application" aria-label="Calculadora">
    <div class="display" id="display" aria-live="polite">
      <div class="small" id="history">&nbsp;</div>
      <div id="output">0</div>
    </div>

    <div class="keys">
      <button id="clear">C</button>
      <button id="back">⌫</button>
      <button id="percent">%</button>
      <button class="op" data-op="/">÷</button>

      <button data-num="7">7</button>
      <button data-num="8">8</button>
      <button data-num="9">9</button>
      <button class="op" data-op="*">×</button>

      <button data-num="4">4</button>
      <button data-num="5">5</button>
      <button data-num="6">6</button>
      <button class="op" data-op="-">−</button>

      <button data-num="1">1</button>
      <button data-num="2">2</button>
      <button data-num="3">3</button>
      <button class="op" data-op="+">+</button>

      <button data-num="0" class="wide">0</button>
      <button id="dot">.</button>
      <button id="equals" class="op">=</button>
    </div>
  </main>

  <script>
    (function(){
      const output = document.getElementById('output');
      const history = document.getElementById('history');
      let current = '';
      let previous = '';
      let operator = null;
      let resetNext = false;

      function updateDisplay(){
        output.textContent = current || '0';
        history.textContent = previous ? `${previous} ${operator || ''}` : '';
      }

      function appendNumber(n){
        if(resetNext){ current = ''; resetNext = false }
        if(n === '.' && current.includes('.')) return;
        if(current === '0' && n !== '.') current = n; else current = (current || '') + n;
      }

      function chooseOp(op){
        if(!current && previous) { operator = op; updateDisplay(); return }
        if(previous && current){ compute(); }
        operator = op;
        previous = current || previous;
        current = '';
      }

      function compute(){
        if(!previous) return;
        const a = parseFloat(previous.replace(',', '.'));
        const b = parseFloat(current || previous);
        let res = 0;
        switch(operator){
          case '+': res = a + b; break;
          case '-': res = a - b; break;
          case '*': res = a * b; break;
          case '/': res = b === 0 ? 'Erro' : a / b; break;
          default: return;
        }
        current = (typeof res === 'number' && !Number.isFinite(res)) ? 'Erro' : String(Number.isFinite(res) ? +res.toPrecision(12) : res);
        previous = '';
        operator = null;
        resetNext = true;
      }

      function percent(){
        if(!current) return;
        current = String(parseFloat(current) / 100);
      }

      function clearAll(){ current = ''; previous = ''; operator = null; }
      function backspace(){ if(current) current = current.slice(0,-1); }

      document.querySelectorAll('[data-num]').forEach(b=> b.addEventListener('click', e=>{ appendNumber(e.target.dataset.num); updateDisplay(); }));
      document.getElementById('dot').addEventListener('click', ()=>{ appendNumber('.'); updateDisplay(); });
      document.querySelectorAll('[data-op]').forEach(b=> b.addEventListener('click', e=>{ chooseOp(e.target.dataset.op); updateDisplay(); }));
      document.getElementById('equals').addEventListener('click', ()=>{ compute(); updateDisplay(); });
      document.getElementById('clear').addEventListener('click', ()=>{ clearAll(); updateDisplay(); });
      document.getElementById('back').addEventListener('click', ()=>{ backspace(); updateDisplay(); });
      document.getElementById('percent').addEventListener('click', ()=>{ percent(); updateDisplay(); });

      // keyboard support
      window.addEventListener('keydown', (e)=>{
        if(e.key >= '0' && e.key <= '9') { appendNumber(e.key); updateDisplay(); }
        if(e.key === '.' || e.key === ',') { appendNumber('.'); updateDisplay(); }
        if(['+','-','*','/'].includes(e.key)) { chooseOp(e.key); updateDisplay(); }
        if(e.key === 'Enter' || e.key === '=') { e.preventDefault(); compute(); updateDisplay(); }
        if(e.key === 'Backspace') { backspace(); updateDisplay(); }
        if(e.key.toLowerCase() === 'c') { clearAll(); updateDisplay(); }
      });

      // initial
      updateDisplay();

    })();
  </script>
</body>
</html>